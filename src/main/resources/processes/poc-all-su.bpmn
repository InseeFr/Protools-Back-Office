<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:design="http://flowable.org/design" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef" design:palette="flowable-work-process-palette">
  <process id="poc-all-su" name="poc-allSU" isExecutable="true">
    <extensionElements>
      <design:stencilid><![CDATA[BPMNDiagram]]></design:stencilid>
      <design:creationdate><![CDATA[2024-04-26T10:05:10.457Z]]></design:creationdate>
      <design:modificationdate><![CDATA[2024-05-21T12:33:06.588Z]]></design:modificationdate>
    </extensionElements>
    <subProcess id="bpmnStructure_12" name="Création des UE dans platine questionnaire">
      <extensionElements>
        <design:stencilid><![CDATA[ExpandedSubProcess]]></design:stencilid>
      </extensionElements>
      <serviceTask id="sid-TASK_creer_ue_platine_questionnaire" name="Creer toutes les UE dans platine Questionnaire API" flowable:async="true" flowable:exclusive="false" flowable:delegateExpression="${PlatineQuestionnaireCreateSurveyUnitTaskv2}">
        <extensionElements>
          <design:stencilid><![CDATA[ServiceTask]]></design:stencilid>
          <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
        </extensionElements>
      </serviceTask>
      <serviceTask id="bpmnTask_23" name="Creer toutes les UE Command - MangoDB" flowable:async="true" flowable:exclusive="false" flowable:delegateExpression="${PlatineQuestionnaireCreateSurveyUnitTaskAsync}">
        <extensionElements>
          <design:stencilid><![CDATA[ServiceTask]]></design:stencilid>
          <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
        </extensionElements>
      </serviceTask>
      <exclusiveGateway id="bpmnGateway_6" name="choix  mode">
        <extensionElements>
          <design:stencilid><![CDATA[Exclusive_Databased_Gateway]]></design:stencilid>
          <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
        </extensionElements>
      </exclusiveGateway>
      <startEvent id="bpmnStartEvent_13" flowable:initiator="initiator" flowable:formFieldValidation="false">
        <extensionElements>
          <flowable:work-form-field-validation><![CDATA[false]]></flowable:work-form-field-validation>
          <design:stencilid><![CDATA[StartNoneEvent]]></design:stencilid>
        </extensionElements>
      </startEvent>
      <endEvent id="bpmnEndEvent_29" name="Fin traitement des UE">
        <extensionElements>
          <design:stencilid><![CDATA[EndNoneEvent]]></design:stencilid>
          <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
        </extensionElements>
      </endEvent>
      <sequenceFlow id="bpmnSequenceFlow_41" sourceRef="sid-TASK_creer_ue_platine_questionnaire" targetRef="bpmnEndEvent_29">
        <extensionElements>
          <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        </extensionElements>
      </sequenceFlow>
      <sequenceFlow id="bpmnSequenceFlow_30" sourceRef="bpmnTask_23" targetRef="bpmnEndEvent_29">
        <extensionElements>
          <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        </extensionElements>
      </sequenceFlow>
      <sequenceFlow id="flow_gateway_api_rest_subprocess" sourceRef="bpmnGateway_6" targetRef="sid-TASK_creer_ue_platine_questionnaire">
        <extensionElements>
          <flowable:condition group="true" match="all" targetAttribute="condition">
            <flowable:condition expressionValue="mode == 'api'"></flowable:condition>
          </flowable:condition>
          <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        </extensionElements>
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${(mode == 'api')}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="bpmnSequenceFlow_43" sourceRef="bpmnGateway_6" targetRef="bpmnTask_23">
        <extensionElements>
          <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        </extensionElements>
      </sequenceFlow>
      <sequenceFlow id="bpmnSequenceFlow_15" sourceRef="bpmnStartEvent_13" targetRef="bpmnGateway_6">
        <extensionElements>
          <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        </extensionElements>
      </sequenceFlow>
    </subProcess>
    <serviceTask id="sid-TASK-creer-campagne-platine-quest" name="creation-campagne-platine-questionnaire" flowable:async="true" flowable:exclusive="false" flowable:delegateExpression="${platineQuestionnaireCreateContextTask}">
      <extensionElements>
        <design:stencilid><![CDATA[ServiceTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
        <design:fontsize><![CDATA[10]]></design:fontsize>
      </extensionElements>
    </serviceTask>
    <serviceTask id="sid-TASK_GET_LIST_OF_UE_IDS" name="Récupération TOUTES UE REM" flowable:async="true" flowable:exclusive="false" flowable:asyncLeave="true" flowable:delegateExpression="${remGetPartitionListOfSuTask}">
      <extensionElements>
        <design:stencilid><![CDATA[ServiceTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
        <design:fontsize><![CDATA[9]]></design:fontsize>
      </extensionElements>
    </serviceTask>
    <scriptTask id="bpmnTask_2" name="LOG FIN DU TRAITEMENT " flowable:async="true" flowable:exclusive="false" scriptFormat="groovy" flowable:autoStoreVariables="false">
      <extensionElements>
        <design:stencilid><![CDATA[ScriptTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
        <design:fontsize><![CDATA[9]]></design:fontsize>
      </extensionElements>
      <script><![CDATA[System.out.println("FIN DU BPMN pour ProcessInstanceId="+execution.getProcessInstanceId());]]></script>
    </scriptTask>
    <startEvent id="sid-StartEvent_debutBPMN" flowable:formFieldValidation="true">
      <extensionElements>
        <flowable:work-form-field-validation><![CDATA[false]]></flowable:work-form-field-validation>
        <design:stencilid><![CDATA[StartNoneEvent]]></design:stencilid>
      </extensionElements>
    </startEvent>
    <endEvent id="sid-EndEvent_Fin_du_processus">
      <extensionElements>
        <design:stencilid><![CDATA[EndNoneEvent]]></design:stencilid>
      </extensionElements>
    </endEvent>
    <sequenceFlow id="bpmnSequenceFlow_37" sourceRef="bpmnStructure_12" targetRef="bpmnTask_2">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_38" sourceRef="sid-TASK-creer-campagne-platine-quest" targetRef="sid-TASK_GET_LIST_OF_UE_IDS">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_39" sourceRef="sid-TASK_GET_LIST_OF_UE_IDS" targetRef="bpmnStructure_12">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_36" sourceRef="bpmnTask_2" targetRef="sid-EndEvent_Fin_du_processus">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="sid-8751FDC3-D1F5-46E6-8F1D-805F56A48105" sourceRef="sid-StartEvent_debutBPMN" targetRef="sid-TASK-creer-campagne-platine-quest">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_poc-all-su">
    <bpmndi:BPMNPlane bpmnElement="poc-all-su" id="BPMNPlane_poc-all-su">
      <bpmndi:BPMNShape bpmnElement="bpmnStructure_12" id="BPMNShape_bpmnStructure_12">
        <omgdc:Bounds height="355.0" width="503.0" x="416.87200000000007" y="354.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-TASK_creer_ue_platine_questionnaire" id="BPMNShape_sid-TASK_creer_ue_platine_questionnaire">
        <omgdc:Bounds height="114.0" width="145.0" x="634.772" y="411.4912000000001"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bpmnTask_23" id="BPMNShape_bpmnTask_23">
        <omgdc:Bounds height="97.0" width="123.0" x="645.772" y="579.9912"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bpmnGateway_6" id="BPMNShape_bpmnGateway_6">
        <omgdc:Bounds height="40.0" width="40.0" x="477.87200000000007" y="543.4912"></omgdc:Bounds>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="18.0" width="68.0" x="521.8720000000001" y="554.4912"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bpmnStartEvent_13" id="BPMNShape_bpmnStartEvent_13">
        <omgdc:Bounds height="30.0" width="30.0" x="425.87200000000007" y="548.4912"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bpmnEndEvent_29" id="BPMNShape_bpmnEndEvent_29">
        <omgdc:Bounds height="28.0" width="28.0" x="867.5747199999998" y="535.0"></omgdc:Bounds>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="18.0" width="123.0" x="728.2747199999999" y="541.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-TASK-creer-campagne-platine-quest" id="BPMNShape_sid-TASK-creer-campagne-platine-quest">
        <omgdc:Bounds height="62.0" width="107.0" x="268.0" y="457.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-TASK_GET_LIST_OF_UE_IDS" id="BPMNShape_sid-TASK_GET_LIST_OF_UE_IDS">
        <omgdc:Bounds height="53.0" width="100.0" x="271.5" y="564.4912"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bpmnTask_2" id="BPMNShape_bpmnTask_2">
        <omgdc:Bounds height="51.0" width="65.0" x="971.5000000000011" y="506.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-StartEvent_debutBPMN" id="BPMNShape_sid-StartEvent_debutBPMN">
        <omgdc:Bounds height="30.0" width="30.0" x="306.5" y="381.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-EndEvent_Fin_du_processus" id="BPMNShape_sid-EndEvent_Fin_du_processus">
        <omgdc:Bounds height="28.0" width="28.0" x="1070.3000000000013" y="517.5"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_43" id="BPMNEdge_bpmnSequenceFlow_43" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="62.0" flowable:targetDockerY="49.0">
        <omgdi:waypoint x="497.87200000000007" y="583.4912"></omgdi:waypoint>
        <omgdi:waypoint x="497.87200000000007" y="628.4912"></omgdi:waypoint>
        <omgdi:waypoint x="645.772" y="628.4912"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8751FDC3-D1F5-46E6-8F1D-805F56A48105" id="BPMNEdge_sid-8751FDC3-D1F5-46E6-8F1D-805F56A48105" flowable:sourceDockerX="15.0" flowable:sourceDockerY="15.0" flowable:targetDockerX="54.0" flowable:targetDockerY="31.0">
        <omgdi:waypoint x="321.5" y="411.5"></omgdi:waypoint>
        <omgdi:waypoint x="321.5" y="457.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_15" id="BPMNEdge_bpmnSequenceFlow_15" flowable:sourceDockerX="15.0" flowable:sourceDockerY="15.0" flowable:targetDockerX="20.0" flowable:targetDockerY="20.0">
        <omgdi:waypoint x="455.87200000000007" y="563.4912"></omgdi:waypoint>
        <omgdi:waypoint x="477.87200000000007" y="563.4912"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_37" id="BPMNEdge_bpmnSequenceFlow_37" flowable:sourceDockerX="252.0" flowable:sourceDockerY="178.0" flowable:targetDockerX="33.0" flowable:targetDockerY="26.0">
        <omgdi:waypoint x="919.8720000000001" y="531.5"></omgdi:waypoint>
        <omgdi:waypoint x="971.5000000000011" y="531.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_36" id="BPMNEdge_bpmnSequenceFlow_36" flowable:sourceDockerX="33.0" flowable:sourceDockerY="26.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="1036.5000000000011" y="531.5"></omgdi:waypoint>
        <omgdi:waypoint x="1070.3000000000013" y="531.5"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow_gateway_api_rest_subprocess" id="BPMNEdge_flow_gateway_api_rest_subprocess" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="73.0" flowable:targetDockerY="57.0">
        <omgdi:waypoint x="497.87200000000007" y="543.4912"></omgdi:waypoint>
        <omgdi:waypoint x="497.87200000000007" y="468.4912000000001"></omgdi:waypoint>
        <omgdi:waypoint x="634.772" y="468.4912000000001"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_39" id="BPMNEdge_bpmnSequenceFlow_39" flowable:sourceDockerX="50.0" flowable:sourceDockerY="27.0" flowable:targetDockerX="252.0" flowable:targetDockerY="178.0">
        <omgdi:waypoint x="371.5" y="590.9912"></omgdi:waypoint>
        <omgdi:waypoint x="394.18600000000004" y="590.9912"></omgdi:waypoint>
        <omgdi:waypoint x="394.18600000000004" y="590.6666666666666"></omgdi:waypoint>
        <omgdi:waypoint x="416.87200000000007" y="590.6666666666666"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_38" id="BPMNEdge_bpmnSequenceFlow_38" flowable:sourceDockerX="54.0" flowable:sourceDockerY="31.0" flowable:targetDockerX="50.0" flowable:targetDockerY="27.0">
        <omgdi:waypoint x="321.5" y="519.0"></omgdi:waypoint>
        <omgdi:waypoint x="321.5" y="564.4912"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_41" id="BPMNEdge_bpmnSequenceFlow_41" flowable:sourceDockerX="73.0" flowable:sourceDockerY="57.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="779.772" y="468.4912000000001"></omgdi:waypoint>
        <omgdi:waypoint x="881.5747199999998" y="468.4912000000001"></omgdi:waypoint>
        <omgdi:waypoint x="881.5747199999998" y="535.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_30" id="BPMNEdge_bpmnSequenceFlow_30" flowable:sourceDockerX="62.0" flowable:sourceDockerY="49.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="768.772" y="628.4912"></omgdi:waypoint>
        <omgdi:waypoint x="881.5747199999998" y="628.4912"></omgdi:waypoint>
        <omgdi:waypoint x="881.5747199999998" y="563.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>